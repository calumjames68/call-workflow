<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Interaction Checklist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #f8fafc;
        }
        .info-icon {
            color: #9ca3af;
            cursor: pointer;
            font-weight: bold;
        }
        .radio-group label {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            margin-right: 1rem;
            font-size: 0.875rem;
            color: #4b5563;
        }
        .radio-group input[type="radio"] {
            margin-right: 0.25rem;
        }
        /* Modal styles */
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-7xl mx-auto">

        <header class="mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center">
             <h1 class="text-3xl font-bold text-gray-800 mb-4 sm:mb-0">Customer Interaction Checklist</h1>
             <!-- Daily Stats Section -->
             <div class="bg-white p-4 rounded-lg shadow-md w-full sm:w-auto">
                <div class="flex items-center justify-center gap-4 mb-2">
                    <button id="prev-day-btn" class="text-indigo-600 hover:text-indigo-800 font-bold p-1 rounded-full leading-none disabled:opacity-50 disabled:cursor-not-allowed">&lt;</button>
                    <h3 class="font-bold text-sm uppercase text-gray-500 tracking-wider text-center" id="stats-date-display">Today's Stats</h3>
                    <button id="next-day-btn" class="text-indigo-600 hover:text-indigo-800 font-bold p-1 rounded-full leading-none disabled:opacity-50 disabled:cursor-not-allowed" disabled>&gt;</button>
                </div>
                <div class="flex justify-around gap-6 text-center">
                    <div>
                        <p class="text-2xl font-bold text-indigo-600" id="total-calls">0</p>
                        <p class="text-xs text-gray-500">Total Calls</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-indigo-600" id="average-score">0%</p>
                        <p class="text-xs text-gray-500">Average Score</p>
                    </div>
                </div>
            </div>
        </header>

        <form id="checklist-form">
            <!-- Stages Section -->
            <section class="mb-10">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Stages</h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                    <!-- 1. Connect & Understand -->
                    <div class="bg-white p-5 rounded-lg shadow-md flex flex-col">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-xs uppercase text-gray-500 tracking-wider">1. Connect & Understand</h3>
                            <span class="info-icon" title="This stage covers everything from your initial greeting to fully understanding the customer's needs, merging the original 'Welcome' and 'Explore' steps.">&#9432;</span>
                        </div>
                        <div class="space-y-5 flex-grow">
                            <!-- Questions from Welcome -->
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Introduce ourselves as Guides with our name and location</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">"Hi my name is Calum from Dundee and I'll be your guide today."</p>
                                <div class="radio-group"><label><input type="radio" name="welcome_intro" value="Yes" required> Yes</label><label><input type="radio" name="welcome_intro" value="No"> No</label></div>
                            </div>
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Check who we are speaking with & understand how they'd like to be referred to</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "Can I take your name please? And how would you like me to address you?"</p>
                                <div class="radio-group"><label><input type="radio" name="welcome_refer" value="Yes" required> Yes</label><label><input type="radio" name="welcome_refer" value="No"> No</label></div>
                            </div>
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Be ready to help our customer</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "How can I help you today?"</p>
                                <div class="radio-group"><label><input type="radio" name="welcome_ready" value="Yes" required> Yes</label><label><input type="radio" name="welcome_ready" value="No"> No</label></div>
                            </div>
                            <!-- Questions from Explore -->
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Ask open questions to fully understand why they contacted us</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "Could you tell me a bit more about what's been happening?"</p>
                                <div class="radio-group"><label><input type="radio" name="explore_questions" value="Yes" required> Yes</label><label><input type="radio" name="explore_questions" value="No"> No</label><label><input type="radio" name="explore_questions" value="Partial"> Partial</label></div>
                            </div>
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Invite customer to talk about individual and household needs</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "To get a better picture, can you tell me who uses the service at home?"</p>
                                <div class="radio-group"><label><input type="radio" name="explore_invite" value="Yes" required> Yes</label><label><input type="radio" name="explore_invite" value="No"> No</label><label><input type="radio" name="explore_invite" value="Partial"> Partial</label><label><input type="radio" name="explore_invite" value="N/A"> N/A</label></div>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Guide & Resolve -->
                    <div class="bg-white p-5 rounded-lg shadow-md flex flex-col">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-xs uppercase text-gray-500 tracking-wider">2. Guide & Resolve</h3>
                             <span class="info-icon" title="This is the core problem-solving part of the call where you actively work to fix the customer's issue.">&#9432;</span>
                        </div>
                        <div class="space-y-5 flex-grow">
                             <div>
                                <p class="text-sm text-gray-700 mb-2">Use the necessary tools and processes to provide the right solution</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., Follow the ALBERT process, check system notes thoroughly.</p>
                                <div class="radio-group"><label><input type="radio" name="solution_tools" value="Yes" required> Yes</label><label><input type="radio" name="solution_tools" value="No"> No</label><label><input type="radio" name="solution_tools" value="Partial"> Partial</label></div>
                            </div>
                             <div>
                                <p class="text-sm text-gray-700 mb-2">Bring the customer on the journey</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "Okay, I'm just running a check on the line now, it should take about a minute."</p>
                                <div class="radio-group"><label><input type="radio" name="solution_journey" value="Yes" required> Yes</label><label><input type="radio" name="solution_journey" value="No"> No</label><label><input type="radio" name="solution_journey" value="Partial"> Partial</label></div>
                            </div>
                             <div>
                                <p class="text-sm text-gray-700 mb-2">Offer an alternative or multiple solutions, where appropriate</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "We could do X now, or we could try Y which might be a better long-term fix."</p>
                                <div class="radio-group"><label><input type="radio" name="solution_alternatives" value="Yes" required> Yes</label><label><input type="radio" name="solution_alternatives" value="No"> No</label><label><input type="radio" name="solution_alternatives" value="Partial"> Partial</label></div>
                            </div>
                             <div>
                                <p class="text-sm text-gray-700 mb-2">Explain next steps and gain commitment</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "So, the next step is an engineer visit. Are you happy for me to book that?"</p>
                                <div class="radio-group"><label><input type="radio" name="solution_steps" value="Yes" required> Yes</label><label><input type="radio" name="solution_steps" value="No"> No</label><label><input type="radio" name="solution_steps" value="Partial"> Partial</label></div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Strengthen & Conclude -->
                    <div class="bg-white p-5 rounded-lg shadow-md flex flex-col">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-xs uppercase text-gray-500 tracking-wider">3. Strengthen & Conclude</h3>
                            <span class="info-icon" title="This final stage, merging 'Build Relationship' and 'Until Next Time', is about ensuring the customer feels valued and clear on the outcome.">&#9432;</span>
                        </div>
                        <div class="space-y-5 flex-grow">
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Make the customer feel valued</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "I can see you've been with us for a while, we really appreciate that."</p>
                                <div class="radio-group"><label><input type="radio" name="rel_valued" value="Yes" required> Yes</label><label><input type="radio" name="rel_valued" value="No"> No</label><label><input type="radio" name="rel_valued" value="Partial"> Partial</label></div>
                            </div>
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Help them understand how to explore their benefits</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "Did you know that as part of your plan, you also have access to...?"</p>
                                <div class="radio-group"><label><input type="radio" name="rel_benefits" value="Yes" required> Yes</label><label><input type="radio" name="rel_benefits" value="No"> No</label><label><input type="radio" name="rel_benefits" value="Partial"> Partial</label></div>
                            </div>
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Ensure they leave feeling confident & clear on what's next</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "Just to recap, I've booked the engineer for Tuesday and you'll get a text to confirm."</p>
                                <div class="radio-group"><label><input type="radio" name="next_confident" value="Yes" required> Yes</label><label><input type="radio" name="next_confident" value="No"> No</label></div>
                            </div>
                            <div>
                                <p class="text-sm text-gray-700 mb-2">Thank our customers</p>
                                <p class="text-xs text-gray-500 italic mt-1 mb-2">e.g., "Thanks again for your time today, is there anything else at all I can help with?"</p>
                                <div class="radio-group"><label><input type="radio" name="next_thank" value="Yes" required> Yes</label><label><input type="radio" name="next_thank" value="No"> No</label></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Behaviours Section -->
            <section class="mb-10">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Behaviours</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-5 rounded-lg shadow-md">
                        <h3 class="font-bold text-xs uppercase text-gray-500 tracking-wider mb-5">Treat you how you like to be treated</h3>
                        <div class="grid grid-cols-[1fr_auto_auto] items-center gap-y-4 gap-x-2">
                            <span class="font-semibold text-gray-800">Curious</span>
                            <div class="radio-group flex-shrink-0"><label><input type="radio" name="beh_curious" value="Yes" required> Yes</label><label><input type="radio" name="beh_curious" value="No"> No</label><label><input type="radio" name="beh_curious" value="Partial"> Partial</label></div>
                            <span class="info-icon" title="Dig deeper than the surface issue. What's the real impact on the customer? Ask follow-up questions to truly understand their situation and needs.">&#9432;</span>
                            
                            <span class="font-semibold text-gray-800">Knowledgeable</span>
                            <div class="radio-group flex-shrink-0"><label><input type="radio" name="beh_knowledge" value="Yes" required> Yes</label><label><input type="radio" name="beh_knowledge" value="No"> No</label><label><input type="radio" name="beh_knowledge" value="Partial"> Partial</label></div>
                            <span class="info-icon" title="Use clear, confident language. Avoid filler words like 'I think' or 'maybe'. Project confidence in your proposed solution and the company's processes.">&#9432;</span>
                            
                            <span class="font-semibold text-gray-800">Honest and Fair</span>
                            <div class="radio-group flex-shrink-0"><label><input type="radio" name="beh_honest" value="Yes" required> Yes</label><label><input type="radio" name="beh_honest" value="No"> No</label><label><input type="radio" name="beh_honest" value="Partial"> Partial</label></div>
                            <span class="info-icon" title="Be transparent with the customer. If something is not possible, say so and explain why. Don't overpromise or set unrealistic expectations.">&#9432;</span>
                        </div>
                    </div>
                    <div class="bg-white p-5 rounded-lg shadow-md">
                        <h3 class="font-bold text-xs uppercase text-gray-500 tracking-wider mb-5">Be your personal guide</h3>
                        <div class="grid grid-cols-[1fr_auto_auto] items-center gap-y-4 gap-x-2">
                            <span class="font-semibold text-gray-800">Offer Relevant Products & Services</span>
                            <div class="radio-group flex-shrink-0"><label><input type="radio" name="guide_offer" value="Yes" required> Yes</label><label><input type="radio" name="guide_offer" value="No"> No</label><label><input type="radio" name="guide_offer" value="Partial"> Partial</label><label><input type="radio" name="guide_offer" value="N/A"> N/A</label></div>
                            <span class="info-icon" title="Listen for opportunities. e.g., 'Based on what you've said, our new TV package might actually save you money and give you the channels you're looking for.'">&#9432;</span>
                            
                            <span class="font-semibold text-gray-800">Take Ownership</span>
                            <div class="radio-group flex-shrink-0"><label><input type="radio" name="guide_ownership" value="Yes" required> Yes</label><label><input type="radio" name="guide_ownership" value="No"> No</label><label><input type="radio" name="guide_ownership" value="Partial"> Partial</label></div>
                            <span class="info-icon" title="Reassure the customer that you are personally handling their issue. Use 'I will' instead of 'we will'. e.g., 'I'll get that sorted for you right now.'">&#9432;</span>
                            
                            <span class="font-semibold text-gray-800">Brand Advocacy</span>
                            <div class="radio-group flex-shrink-0"><label><input type="radio" name="guide_brand" value="Yes" required> Yes</label><label><input type="radio" name="guide_brand" value="No"> No</label><label><input type="radio" name="guide_brand" value="Partial"> Partial</label></div>
                            <span class="info-icon" title="Share positive features or news about the company when relevant to build confidence. e.g., 'We've just won an award for our broadband speed.'">&#9432;</span>
                        </div>
                    </div>
                </div>
            </section>

            <div class="text-center">
                <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-transform transform hover:scale-105">
                    Submit & Score Call
                </button>
            </div>
        </form>
    </div>

    <!-- Score Modal -->
    <div id="score-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 hidden modal-backdrop">
        <div class="bg-white rounded-lg shadow-2xl p-8 max-w-sm w-full text-center modal-content scale-95">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Call Complete!</h2>
            <p class="text-gray-600 mb-4">Here is your score for this call.</p>
            <p id="final-score" class="text-6xl font-bold my-4">0%</p>
            <div id="feedback-section" class="text-left my-6">
                <!-- Feedback will be injected here by JavaScript -->
            </div>
            <button id="new-call-btn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">
                Start New Call
            </button>
        </div>
    </div>
    
    <!-- Info Modal -->
    <div id="info-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 hidden modal-backdrop">
        <div class="bg-white rounded-lg shadow-2xl p-8 max-w-md w-full text-left modal-content scale-95">
            <div class="flex justify-between items-center mb-4">
                <h2 id="info-modal-title" class="text-xl font-bold text-gray-800">Information</h2>
                <button id="info-modal-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <p id="info-modal-content" class="text-gray-600"></p>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const checklistForm = document.getElementById('checklist-form');
    const scoreModal = document.getElementById('score-modal');
    const finalScoreEl = document.getElementById('final-score');
    const newCallBtn = document.getElementById('new-call-btn');
    const totalCallsEl = document.getElementById('total-calls');
    const averageScoreEl = document.getElementById('average-score');
    const statsDateDisplay = document.getElementById('stats-date-display');
    const prevDayBtn = document.getElementById('prev-day-btn');
    const nextDayBtn = document.getElementById('next-day-btn');
    const infoModal = document.getElementById('info-modal');
    const infoModalTitle = document.getElementById('info-modal-title');
    const infoModalContent = document.getElementById('info-modal-content');
    const infoModalCloseBtn = document.getElementById('info-modal-close-btn');
    const infoIcons = document.querySelectorAll('.info-icon');
    
    let viewedDate = new Date();

    function getDateString(date) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }

    function updateStatsDisplay(scores = []) {
        totalCallsEl.textContent = scores.length;
        if (scores.length > 0) {
            const totalScore = scores.reduce((sum, score) => sum + score, 0);
            const average = Math.round(totalScore / scores.length);
            averageScoreEl.textContent = `${average}%`;
        } else {
            averageScoreEl.textContent = '0%';
            totalCallsEl.textContent = '0';
        }
    }

    function displayStatsForDate(date) {
        const dateKey = getDateString(date);
        const allStats = JSON.parse(localStorage.getItem('allCallStats')) || {};
        const dayStats = allStats[dateKey] ? allStats[dateKey].scores : [];
        
        updateStatsDisplay(dayStats);

        const todayKey = getDateString(new Date());
        if (dateKey === todayKey) {
            statsDateDisplay.textContent = "Today's Stats";
        } else {
            statsDateDisplay.textContent = date.toLocaleDateString('en-GB', { day: 'numeric', month: 'short' });
        }

        nextDayBtn.disabled = dateKey === todayKey;
    }

    prevDayBtn.addEventListener('click', () => {
        viewedDate.setDate(viewedDate.getDate() - 1);
        displayStatsForDate(viewedDate);
    });

    nextDayBtn.addEventListener('click', () => {
        viewedDate.setDate(viewedDate.getDate() + 1);
        displayStatsForDate(viewedDate);
    });

    checklistForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const formData = new FormData(checklistForm);
        let score = 0;
        let maxScore = 0;
        const improvementAreas = [];

        const questions = [...new Set([...formData.keys()])];

        questions.forEach(name => {
            const value = formData.get(name);
            const inputElement = checklistForm.querySelector(`input[name="${name}"]`);
            const questionContainer = inputElement.closest('.radio-group').parentElement;
            const questionText = questionContainer.querySelector('p.text-sm').textContent;

            if (value !== 'N/A') {
                maxScore += 1;
                if (value === 'Yes') {
                    score += 1;
                } else if (value === 'Partial') {
                    score += 0.5;
                    improvementAreas.push(`Review: ${questionText}`);
                } else if (value === 'No') {
                    improvementAreas.push(questionText);
                }
            }
        });

        const percentage = (maxScore > 0) ? Math.round((score / maxScore) * 100) : 100;
        
        finalScoreEl.classList.remove('text-green-600', 'text-amber-500', 'text-red-600');
        if (percentage >= 90) {
            finalScoreEl.classList.add('text-green-600');
        } else if (percentage >= 75) {
            finalScoreEl.classList.add('text-amber-500');
        } else {
            finalScoreEl.classList.add('text-red-600');
        }
        
        finalScoreEl.textContent = `${percentage}%`;

        const feedbackSection = document.getElementById('feedback-section');
        feedbackSection.innerHTML = ''; // Clear previous feedback

        if (improvementAreas.length > 0) {
            let feedbackHtml = '<h3 class="font-bold text-gray-800 mb-2">Areas for Improvement:</h3><ul class="list-disc list-inside text-red-600 space-y-1">';
            improvementAreas.forEach(area => {
                feedbackHtml += `<li>${area}</li>`;
            });
            feedbackHtml += '</ul>';
            feedbackSection.innerHTML = feedbackHtml;
        } else {
            feedbackSection.innerHTML = '<p class="text-center font-semibold text-green-600">Excellent work! All steps completed perfectly.</p>';
        }

        scoreModal.classList.remove('hidden');
        setTimeout(() => {
             scoreModal.querySelector('.modal-content').classList.remove('scale-95');
             scoreModal.classList.remove('opacity-0');
        }, 10);
        
        const todayKey = getDateString(new Date());
        let allStats = JSON.parse(localStorage.getItem('allCallStats')) || {};
        if (!allStats[todayKey]) {
            allStats[todayKey] = { scores: [] };
        }
        allStats[todayKey].scores.push(percentage);
        localStorage.setItem('allCallStats', JSON.stringify(allStats));
        
        viewedDate = new Date();
        displayStatsForDate(viewedDate);
    });
    
    newCallBtn.addEventListener('click', () => {
        checklistForm.reset();
        scoreModal.querySelector('.modal-content').classList.add('scale-95');
        scoreModal.classList.add('opacity-0');
        setTimeout(() => {
            scoreModal.classList.add('hidden');
        }, 300);
    });

    // --- Info Modal Logic ---
    function openInfoModal(title, content) {
        infoModalTitle.textContent = title;
        infoModalContent.textContent = content;
        infoModal.classList.remove('hidden');
        setTimeout(() => {
            infoModal.querySelector('.modal-content').classList.remove('scale-95');
            infoModal.classList.remove('opacity-0');
        }, 10);
    }

    function closeInfoModal() {
        infoModal.querySelector('.modal-content').classList.add('scale-95');
        infoModal.classList.add('opacity-0');
        setTimeout(() => {
            infoModal.classList.add('hidden');
        }, 300);
    }

    infoIcons.forEach(icon => {
        icon.addEventListener('click', (e) => {
            const content = e.target.getAttribute('title');
            if (!content) return;

            let title = 'Information'; // Default title

            // Try to find the specific item's title first (for Behaviours section)
            const specificTitleEl = e.target.parentElement.querySelector('.font-semibold');
            if (specificTitleEl && specificTitleEl.closest('.grid')) {
                title = specificTitleEl.textContent;
            } else {
                // Fallback to the card's main title (for Stages section)
                const card = e.target.closest('.bg-white');
                if (card) {
                    const cardTitleEl = card.querySelector('h3');
                    if (cardTitleEl) {
                        title = cardTitleEl.textContent;
                    }
                }
            }
            
            openInfoModal(title, content);
        });
    });

    infoModalCloseBtn.addEventListener('click', closeInfoModal);
    infoModal.addEventListener('click', (e) => {
        if (e.target === infoModal) { // Click on backdrop
            closeInfoModal();
        }
    });
    
    displayStatsForDate(viewedDate);
});
</script>

</body>
</html>
